{{#projects-map-data as |map|}}
  {{#if (and tiles bounds)}}
    {{!-- High-level dynamic tiles configuration --}}
    {{#map.dynamic-tiles 
      tiles=tilesForZoom
      sourceId=projectCentroidsCircleLayer.source
      as |dynamic-tile-source|
    }}
      {{dynamic-tile-source.layer
        layer=projectCentroidsCircleLayer
        before='boundary_country'
      }}

      {{dynamic-tile-source.layer
        layer=projectPolygonsLayer
        before='boundary_country'
      }}

      {{!-- Anything else for dynamic tiles, like hovers --}}
      {{map.layer 
        layer=projectCentroidsCircleHoverLayer
      }}
    {{/map.dynamic-tiles}}

    {{map.call 'fitBounds' bounds fitBoundsOptions}}
  {{/if}}

  {{map.on 'zoomend' (action 'computeTileMode')}}

  {{yield map}}
  {{yield (hash address-search=(component 'address-search' map=map))}}
{{/projects-map-data}}
