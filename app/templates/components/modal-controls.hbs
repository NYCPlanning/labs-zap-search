<div class="modal-controls">

  <button type="button" onClick={{fn this.handleShareOpen}} class="modal-button button small gray">{{fa-icon 'share-alt'}} Share Project</button>
  <button type="button" onClick={{fn this.handleFlagOpen}} class="modal-button button small gray">{{fa-icon 'flag'}} Report Data Issue</button>

  {{#if (not (and this.shareClosed this.flagClosed))}}
    <div class="modal-controls-content">
      <button onClick={{fn this.handleModalClose}} class="close-button" aria-label="Close alert" type="button"><span aria-hidden="true">&times;</span></button>

      {{#unless this.shareClosed}}
        <h3 class="header header-small">Share Project {{this.model.dcp_name}}:</h3>
        <div class="input-group">
          <input id="share-url" class="input-group-field" type="text" value="{{this.shareURL}}">
          <div class="input-group-button">
            <CopyButton
              clipboardTarget="#share-url"
              success={{fn this.handleShareSuccess}}
              error={{fn this.handleModalClose}}
              class="button"
            >
              {{fa-icon 'paste'}} Copy Link
            </CopyButton>
          </div>
        </div>
        {{#if this.copySuccess}}
        <div class="share-controls-copy-success">
          <div class="share-controls-copy-success-message">{{fa-icon 'check'}} Copied</div>
        </div>
        {{/if}}
      {{/unless}}

      {{#unless this.flagClosed}}
        <h3 class="header header-medium">Report Data Issue {{this.model.dcp_name}}</h3>
        <div class="callout secondary padding-point5-rem">
          <p class="margin-bottom-point5-em">{{fa-icon 'exclamation-triangle' class="gold"}} <strong>This form is for reporting data problems only.</strong> Do not post <a href="https://a002-irm.nyc.gov/EventRegistration/RegForm.aspx?eventGuid=fa206f3d-6400-4a95-8b39-87b1bfa975ef" target="_blank" rel="noopener noreferrer">City Planning Commission Public Hearing Comments</a>. For general feedback about this application, email <a href="mailto:ZAP_Feedback_DL@planning.nyc.gov">ZAP_Feedback_DL@planning.nyc.gov</a>.</p>
        </div>

        <ul class="">
          <li><a href="https://github.com/NYCPlanning/zap-data-feedback/issues/new" target="_blank" rel="noopener noreferrer">Add an issue on GitHub</a></li>
          <li><a href="https://github.com/NYCPlanning/zap-data-feedback/issues" target="_blank" rel="noopener noreferrer">View all issues</a></li>
          <li>Add an issue with the following form <em>(creates an issue on GitHub that anyone can see)</em>:</li>
        </ul>

        <form {{fn this.submitFlag on="submit"}}>
          <label>Describe the data problem
            <Textarea rows="4" @value={{this.flagText}} @disabled={{this.flagSuccess}} placeholder="This project's data is incorrect because..."/>
          </label>

          <GRecaptcha @onSuccess={{fn this.onCaptchaResolved}} @tagName='p'/>

          <button type="submit" class="button" disabled={{xor this.flagSuccess (or (lt this.flagText.length 10) (eq this.reCaptchaResponse null))}} >Submit</button>

          {{#if this.flagSuccess}}
            <span class="flag-success">
              <strong><span><FaIcon @icon="check" @size="3x"/></span> <span class="text">Thanks for the feedback!</span></strong>
            </span>
          {{/if}}
        </form>
      {{/unless}}

    </div>
  {{/if}}

</div>
