<h2>Add Community Board Hearing</h2>
<div class="grid-x grid-margin-x">
  <div class="large-5 cell large-order-2">
    <p>Hearings to be submitted for:</p>
    <div class="project-summary-card callout large-margin-bottom">
      <h3 class="tiny-margin-bottom">
        <LinkTo
          @route="show-project"
          @model={{project}}
        >
          {{model.dcpProjectname}}
        </LinkTo>
        <small class="dark-gray">{{model.dcpUlurpNonulurp}}</small>
      </h3>
      <h5 class="applicant">{{model.applicants}}</h5>
      <p>{{model.dcpProjectbrief}}</p>
    </div>
  </div>
  <div class="large-7 cell">
    <fieldset class="medium-margin-bottom">
      <legend><strong>Would you like to submit a single hearing for all actions?</strong></legend>
      <input
        type="radio"
        name="all-action-yes"
        id="all-action-yes"
        data-test-radio="all-action-yes"
        checked={{if (eq allActions true) "checked"}}
        onClick={{action "setProp" "allActions" true}}
      />
      <label for="all-action-yes">
        Yes
      </label>
      <input
        type="radio"
        name="all-action-no"
        id="all-action-no"
        data-test-radio="all-action-no"
        checked={{if (eq allActions false) "checked"}}
        onClick={{action "setProp" "allActions" false}}
      />
      <label for="all-action-no">
        No, I will submit multiple hearings
      </label>
    </fieldset>

    {{#if allActions}}
      {{hearing-form
        disposition=dispositionForAllActions
        allActions=allActions
        checkIfMissing=checkIfMissing}}
    {{else if (eq allActions false)}}
      {{#each model.dispositions as |disposition|}}
        <h4>{{disposition.action.dcpName}}  <small class="dark-gray">{{disposition.action.dcpUlurpnumber}}</small></h4>
        {{hearing-form
          disposition=disposition
          allActions=allActions
          checkIfMissing=checkIfMissing}}
      {{/each}}
    {{/if}}

    {{#if (not-eq allActions null)}}
        <button
          class="button"
          data-test-button="checkHearing"
          type="button"
          onClick={{action "onSubmit"}}
        >
          Continue
        </button>
    {{/if}}

      {{#confirmation-modal open=modalOpen}}
        <h3>Confirm hearing information</h3>

          {{#if allActions}}
            <li class="grid-x">
              <div class="cell shrink small-margin-right">
                  {{fa-icon "calendar" class="light-gray" fixedWidth=true}}
              </div>
              <div class="cell auto">
                <strong class="display-block hearing-location">
                  {{~dispositionForAllActions.dcpPublichearinglocation~}}
                </strong>
                <span class="hearing-date">
                  {{~moment-format dispositionForAllActions.dcpDateofpublichearing "MM/D/YYYY"~}}
                </span>
                <span class="light-gray">|</span>
                <span class="hearing-time">
                  {{~moment-format dispositionForAllActions.dcpDateofpublichearing "h:mm A"~}}
                </span>
              </div>
            </li>
          {{else}}
            {{deduped-hearings-list project=model attribute="dcpUlurpnumber"}}
          {{/if}}

        <p class="callout warning text-small">
          Once you submit hearing information, you can not edit it. You'll need to contact the Lead Planner to make any changes.
        </p>

        <p>
          <button
            class="button"
            data-test-button="confirmHearing"
            type="button"
            onClick={{action "onConfirm"}}
          >
            Submit Hearing Information
          </button>

          <button
            class="button clear"
            data-test-button="closeModal"
            type="button"
            onClick={{action "closeModal"}}
          >
            Cancel <small>(continue editing)</small>
          </button>
        </p>
      {{/confirmation-modal}}
  </div>
</div>

{{outlet}}
